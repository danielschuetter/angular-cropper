<!DOCTYPE html>
<html lang="en" ng-app="cropper-test">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

      * {
        box-sizing: border-box;
      }

      [tw-cropper] {
        font-size: 0;
        display: inline-block;
      }

      [tw-cropper] canvas{
        background: #efefef;

      }
      [tw-cropper].filled canvas{
        cursor: move;
      }

      .cropper-wrapper {
        position: relative;
        vertical-align: middle;
      }

      .cropper-input-wrapper {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        white-space: nowrap;
        vertical-align: middle;
      }

      .cropper-zoom-in,
      .cropper-zoom-out{
        width: 10%;
        display: inline-block;
        text-align: center;
        vertical-align: middle;
        line-height: 1;
        background: none;
        border: none;
        box-shadow: none;
        height: 100%;
        font-size: 16px;
      }

      .cropper-input-wrapper input {
        width: 80%;
        display: inline-block;
        height: 100%;
        vertical-align: middle;
        margin: 0;
      }
    </style>
  </head>

  <body ng-controller="MainController as main">
    <div>
      <input type="file" accept="image/*" simple-change="file = $event.target.files[0]">
    </div>

    <div width="300" height="300" tw-cropper="cropper" source="file" buffer="20"></div>


    <button ng-click="crop = cropper.toDataURL()">Crop</button>

    <img ng-src="{{crop}}">

    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-file-reader/angular-file-reader.js"></script>
    <script src="angular-cropper.js"></script>

    <script>
      angular.module('cropper-test', ['tw.directives.cropper']);

      angular.module('cropper-test').controller('MainController', function() {
      });

      angular.module('cropper-test').directive('simpleChange', function simpleChangeDirective() {
        return {
          restrict: 'A',
          link: function(scope, el, attrs) {
            if (!attrs.simpleChange) return;

            el.on('change', function(e) {
              scope.$apply(function() {
                scope.$eval(attrs.simpleChange, {
                  $event: e
                });
              });
            });
          }
        };
      });
    </script>
  </body>
</html>
